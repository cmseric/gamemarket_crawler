# ğŸŒ GameMarket Crawler Web Dashboard

ä¸€ä¸ªç¾è§‚ã€ç°ä»£åŒ–çš„Steamæ¸¸æˆå¸‚åœºæ•°æ®å¯è§†åŒ–å¹³å°ï¼ŒåŸºäºFlaskæ„å»ºï¼Œæä¾›å®æ—¶æ•°æ®å±•ç¤ºã€å›¾è¡¨åˆ†æå’Œç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ•°æ®æ¦‚è§ˆ
- **å®æ—¶ç»Ÿè®¡å¡ç‰‡**: æ€»æ¸¸æˆæ•°ã€ç‹¬ç«‹æ¸¸æˆæ•°ã€å¹³å‡ä»·æ ¼ã€æ•°æ®è¡¨æ•°é‡
- **æ’è¡Œæ¦œç»Ÿè®¡**: çƒ­é”€æ¦œä¸çƒ­é—¨æ¦œæ•°æ®åˆ†å¸ƒ
- **æ•°æ®æ›´æ–°çŠ¶æ€**: æœ€åæ›´æ–°æ—¶é—´ã€æ•°æ®æ–°é²œåº¦ã€å®Œæ•´æ€§æŒ‡æ ‡
- **å¿«é€Ÿè®¿é—®å¯¼èˆª**: ä¸€é”®è·³è½¬åˆ°å„ä¸ªåŠŸèƒ½æ¨¡å—
- **æœ€æ–°æ¸¸æˆé¢„è§ˆ**: åŠ¨æ€åŠ è½½æœ€æ–°çˆ¬å–çš„æ¸¸æˆæ•°æ®

### ğŸ† æ’è¡Œæ¦œå±•ç¤º
- **Steamçƒ­é”€æ¦œ**: æŒ‰é”€é‡æ’åºçš„ä»˜è´¹æ¸¸æˆæ’è¡Œ
- **Steamçƒ­é—¨æ¦œ**: æŒ‰äººæ°”æ’åºçš„æ¸¸æˆæ’è¡Œ
- **æ¸¸æˆå¡ç‰‡**: ç²¾ç¾çš„å¡ç‰‡å¼å¸ƒå±€ï¼Œå±•ç¤ºæ¸¸æˆè¯¦ç»†ä¿¡æ¯
- **ä»·æ ¼ä¿¡æ¯**: æ”¯æŒåŸä»·ã€æŠ˜æ‰£ä»·ã€æŠ˜æ‰£ç™¾åˆ†æ¯”æ˜¾ç¤º
- **æ¸¸æˆåˆ†ç±»**: è‡ªåŠ¨æ ‡ç­¾åŒ–æ¸¸æˆç±»å‹
- **å¿«é€Ÿé“¾æ¥**: ç›´æ¥è·³è½¬åˆ°Steamå•†åº—é¡µé¢

### ğŸ“ˆ æ•°æ®åˆ†æ
- **ä»·æ ¼åˆ†å¸ƒåˆ†æ**: é¥¼å›¾å±•ç¤ºä¸åŒä»·æ ¼åŒºé—´çš„æ¸¸æˆåˆ†å¸ƒ
- **æ¸¸æˆç±»å‹åˆ†å¸ƒ**: ç¯å½¢å›¾æ˜¾ç¤ºçƒ­é—¨æ¸¸æˆç±»å‹
- **æŠ˜æ‰£åˆ†æ**: æŸ±çŠ¶å›¾åˆ†ææŠ˜æ‰£åŠ›åº¦åˆ†å¸ƒ
- **æ•°æ®é‡‡é›†è¶‹åŠ¿**: çº¿å›¾å±•ç¤ºæ•°æ®é‡‡é›†çš„æ—¶é—´è¶‹åŠ¿
- **å®æ—¶å›¾è¡¨**: æ”¯æŒæ•°æ®è‡ªåŠ¨åˆ·æ–°å’Œç¼“å­˜æœºåˆ¶

### ğŸ—„ï¸ æ•°æ®è¡¨ç®¡ç†
- **åˆ†è¡¨åˆ—è¡¨**: å±•ç¤ºæ‰€æœ‰MySQLåˆ†è¡¨ä¿¡æ¯
- **è¡¨ç»“æ„æŸ¥çœ‹**: è¯¦ç»†çš„è¡¨å­—æ®µä¿¡æ¯å’Œç´¢å¼•æƒ…å†µ
- **æ•°æ®é¢„è§ˆ**: å¿«é€Ÿé¢„è§ˆè¡¨ä¸­çš„æ•°æ®å†…å®¹
- **ç»Ÿè®¡ä¿¡æ¯**: è¡¨è®°å½•æ•°ã€å­˜å‚¨å¤§å°ç­‰ç»Ÿè®¡æŒ‡æ ‡
- **æ•°æ®å¯¼å‡º**: æ”¯æŒCSVæ ¼å¼æ•°æ®å¯¼å‡º

### ğŸ› ï¸ ç³»ç»Ÿç‰¹æ€§
- **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œæ‰‹æœº
- **ç°ä»£åŒ–UI**: åŸºäºBootstrap 5çš„ç°ä»£åŒ–ç•Œé¢
- **å®æ—¶ç¼“å­˜**: Redisç¼“å­˜æå‡æ•°æ®åŠ è½½é€Ÿåº¦
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†
- **é”®ç›˜å¿«æ·é”®**: æ”¯æŒCtrl+Råˆ·æ–°ã€Ctrl+/å¸®åŠ©ç­‰
- **è‡ªåŠ¨åˆ·æ–°**: å¯é…ç½®çš„è‡ªåŠ¨æ•°æ®åˆ·æ–°æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š
- Python 3.8+
- MySQL 8.0+
- Redis 6.0+
- MongoDB 4.4+ (å¯é€‰)

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

### 3. ç¯å¢ƒé…ç½®

åˆ›å»ºé…ç½®æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# MySQLé…ç½®
export MYSQL_HOST=localhost
export MYSQL_PORT=3306
export MYSQL_USER=root
export MYSQL_PASSWORD=your_password
export MYSQL_DATABASE=gamemarket

# Redisé…ç½®
export REDIS_URL=redis://localhost:6379

# MongoDBé…ç½® (å¯é€‰)
export MONGODB_URI=mongodb://localhost:27017
export MONGODB_DATABASE=gamemarket

# Flaské…ç½®
export FLASK_ENV=development
export FLASK_DEBUG=true
```

### 4. å¯åŠ¨Webåº”ç”¨

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
python run_web.py --debug

# ç”Ÿäº§æ¨¡å¼å¯åŠ¨
python run_web.py --env production --host 0.0.0.0 --port 8080

# ä½¿ç”¨Gunicornéƒ¨ç½²
gunicorn -w 4 -b 0.0.0.0:8080 "web.app:create_app('production')"
```

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- å¼€å‘æ¨¡å¼: http://localhost:8080
- ç”Ÿäº§æ¨¡å¼: http://your-server:8080

## ğŸ³ Dockeréƒ¨ç½²

### 1. ä½¿ç”¨Docker Compose

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹Webåº”ç”¨æ—¥å¿—
docker-compose logs -f web
```

### 2. æœåŠ¡è®¿é—®åœ°å€

- **Web Dashboard**: http://localhost:80
- **Webåº”ç”¨ç›´æ¥è®¿é—®**: http://localhost:8080
- **æ•°æ®æ–‡ä»¶ä¸‹è½½**: http://localhost/data/
- **MySQL**: localhost:3306
- **Redis**: localhost:6379
- **MongoDB**: localhost:27017

## ğŸ“± ç•Œé¢é¢„è§ˆ

### é¦–é¡µæ¦‚è§ˆ
![Dashboard](preview/dashboard.png)
- æ•°æ®ç»Ÿè®¡å¡ç‰‡
- æ’è¡Œæ¦œå¿«é€Ÿé¢„è§ˆ
- ç³»ç»ŸçŠ¶æ€ç›‘æ§

### æ’è¡Œæ¦œé¡µé¢
![Rankings](preview/rankings.png)
- æ¸¸æˆå¡ç‰‡å¸ƒå±€
- ä»·æ ¼å’ŒæŠ˜æ‰£ä¿¡æ¯
- æ¸¸æˆåˆ†ç±»æ ‡ç­¾

### æ•°æ®åˆ†æ
![Analytics](preview/analytics.png)
- å¤šç»´åº¦å›¾è¡¨åˆ†æ
- å®æ—¶æ•°æ®æ›´æ–°
- äº¤äº’å¼å›¾è¡¨

### æ•°æ®è¡¨ç®¡ç†
![Tables](preview/tables.png)
- åˆ†è¡¨åˆ—è¡¨ç®¡ç†
- è¡¨ç»“æ„æŸ¥çœ‹
- æ•°æ®é¢„è§ˆå’Œå¯¼å‡º

## ğŸ”§ é…ç½®é€‰é¡¹

### Flaskåº”ç”¨é…ç½®

```python
# web/config.py
class Config:
    # åŸºç¡€é…ç½®
    SECRET_KEY = 'your-secret-key'
    DEBUG = False
    HOST = '0.0.0.0'
    PORT = 8080
    
    # æ•°æ®åº“é…ç½®
    MYSQL_HOST = 'localhost'
    MYSQL_PORT = 3306
    MYSQL_USER = 'root'
    MYSQL_PASSWORD = 'password'
    MYSQL_DATABASE = 'gamemarket'
    
    # ç¼“å­˜é…ç½®
    CACHE_TYPE = 'redis'
    CACHE_DEFAULT_TIMEOUT = 300
    
    # åˆ†é¡µé…ç½®
    ITEMS_PER_PAGE = 20
    MAX_ITEMS_PER_PAGE = 100
```

### ç¼“å­˜ç­–ç•¥

| æ•°æ®ç±»å‹ | ç¼“å­˜æ—¶é—´ | ç¼“å­˜é”® |
|---------|---------|--------|
| ç»Ÿè®¡æ‘˜è¦ | 5åˆ†é’Ÿ | `dashboard_summary` |
| æ’è¡Œæ¦œæ•°æ® | 3åˆ†é’Ÿ | `rankings_{type}_{limit}` |
| å›¾è¡¨æ•°æ® | 10åˆ†é’Ÿ | `chart_{type}` |
| æœ€æ–°æ¸¸æˆ | 3åˆ†é’Ÿ | `latest_games_{limit}_{type}` |

## ğŸ¯ APIæ¥å£

### ç»Ÿè®¡æ¥å£
```
GET /api/stats/summary
è¿”å›: ç³»ç»Ÿç»Ÿè®¡æ‘˜è¦ä¿¡æ¯
```

### æ¸¸æˆæ•°æ®æ¥å£
```
GET /api/games/latest?limit=20&rank_type=topsellers
è¿”å›: æœ€æ–°æ¸¸æˆæ•°æ®åˆ—è¡¨
```

### å›¾è¡¨æ•°æ®æ¥å£
```
GET /api/charts/price-distribution
GET /api/charts/genre-distribution  
GET /api/charts/discount-analysis
GET /api/charts/trending?days=7
è¿”å›: å›¾è¡¨æ•°æ®
```

### ç¼“å­˜ç®¡ç†æ¥å£
```
GET /api/cache/clear?pattern=chart_*
è¿”å›: ç¼“å­˜æ¸…é™¤ç»“æœ
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–
â”œâ”€â”€ app.py                   # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”œâ”€â”€ config.py                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ database.py          # æ•°æ®åº“å·¥å…·ç±»
â”œâ”€â”€ templates/               # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html           # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html          # é¦–é¡µ
â”‚   â”œâ”€â”€ rankings.html       # æ’è¡Œæ¦œ
â”‚   â”œâ”€â”€ analytics.html      # æ•°æ®åˆ†æ
â”‚   â””â”€â”€ tables.html         # æ•°æ®è¡¨ç®¡ç†
â””â”€â”€ static/                 # é™æ€æ–‡ä»¶
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css       # è‡ªå®šä¹‰æ ·å¼
    â””â”€â”€ js/
        â””â”€â”€ main.js         # ä¸»è¦JavaScript
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°å¢é¡µé¢è·¯ç”±**
```python
@app.route('/new-page')
def new_page():
    return render_template('new_page.html')
```

2. **æ–°å¢APIæ¥å£**
```python
@app.route('/api/new-data')
def api_new_data():
    try:
        data = get_new_data()
        return jsonify({
            'success': True,
            'data': data
        })
    except Exception as e:
        return jsonify({
            'success': False,
            'error': str(e)
        }), 500
```

3. **æ–°å¢æ•°æ®æŸ¥è¯¢**
```python
class NewDataQuery:
    def __init__(self, db_manager):
        self.db_manager = db_manager
    
    def get_new_data(self):
        # å®ç°æ•°æ®æŸ¥è¯¢é€»è¾‘
        pass
```

### æ ·å¼å®šåˆ¶

ä¿®æ”¹ `web/static/css/style.css` æ¥å®šåˆ¶ç•Œé¢æ ·å¼ï¼š

```css
/* è‡ªå®šä¹‰ä¸»é¢˜è‰² */
:root {
    --primary-color: #007bff;
    --secondary-color: #6c757d;
    /* æ›´å¤šå˜é‡... */
}

/* è‡ªå®šä¹‰ç»„ä»¶æ ·å¼ */
.custom-card {
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,.08);
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
systemctl status mysql

# æ£€æŸ¥è¿æ¥å‚æ•°
mysql -h localhost -u root -p
```

2. **Redisè¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥RedisæœåŠ¡
systemctl status redis

# æµ‹è¯•è¿æ¥
redis-cli ping
```

3. **Webåº”ç”¨å¯åŠ¨å¤±è´¥**
```bash
# æ£€æŸ¥ä¾èµ–
pip list | grep flask

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
python run_web.py --debug
```

4. **æ•°æ®ä¸æ˜¾ç¤º**
```bash
# æ£€æŸ¥æ•°æ®è¡¨æ˜¯å¦å­˜åœ¨
mysql -u root -p -e "SHOW TABLES FROM gamemarket;"

# æ£€æŸ¥çˆ¬è™«æ•°æ®
python run_crawler.py test --output json
```

### æ€§èƒ½ä¼˜åŒ–

1. **å¯ç”¨ç¼“å­˜**
   - ç¡®ä¿RedisæœåŠ¡æ­£å¸¸è¿è¡Œ
   - è°ƒæ•´ç¼“å­˜è¿‡æœŸæ—¶é—´
   - ä½¿ç”¨ç¼“å­˜é¢„çƒ­

2. **æ•°æ®åº“ä¼˜åŒ–**
   - æ·»åŠ é€‚å½“çš„ç´¢å¼•
   - ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
   - ä½¿ç”¨è¿æ¥æ± 

3. **å‰ç«¯ä¼˜åŒ–**
   - å¯ç”¨Gzipå‹ç¼©
   - ä½¿ç”¨CDNåŠ é€Ÿ
   - ä¼˜åŒ–å›¾ç‰‡èµ„æº

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹åº”ç”¨æ—¥å¿—: `data/logs/web_app.log`
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€
3. éªŒè¯é…ç½®æ–‡ä»¶æ­£ç¡®æ€§
4. å‚è€ƒæ•…éšœæ’é™¤æŒ‡å—

æ›´å¤šå¸®åŠ©è¯·å‚è€ƒé¡¹ç›®ä¸»æ–‡æ¡£æˆ–æäº¤Issueã€‚

---

**GameMarket Crawler Web Dashboard** - è®©æ•°æ®å¯è§†åŒ–æ›´ç®€å•ï¼ ğŸš€ 